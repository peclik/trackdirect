!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;(i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rbush=t()}}(function(){return(function t(i,n,e){function r(o,h){if(!n[o]){if(!i[o]){var s="function"==typeof require&&require;if(!h&&s)return s(o,!0);if(a)return a(o,!0);var f=Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};i[o][0].call(l.exports,function(t){var n;return r(i[o][1][t]||t)},l,l.exports,t,i,n,e)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r})({1:[function(t,i,n){"use strict";i.exports=r,i.exports.default=r;var e=t("quickselect");function r(t,i){if(!(this instanceof r))return new r(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function a(t,i,n){if(!n)return i.indexOf(t);for(var e=0;e<i.length;e++)if(n(t,i[e]))return e;return -1}function o(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,e,r){r||(r=$(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a,o=i;o<n;o++)a=t.children[o],s(r,t.leaf?e(a):a);return r}function s(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function f(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function x(t,i){var n,e=Math.max(t.minX,i.minX),r=Math.max(t.minY,i.minY);return Math.max(0,Math.min(t.maxX,i.maxX)-e)*Math.max(0,Math.min(t.maxY,i.maxY)-r)}function d(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function $(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,i,n,r,a){for(var o,h=[i,n];h.length;)!((n=h.pop())-(i=h.pop())<=r)&&(e(t,o=i+Math.ceil((n-i)/r/2)*r,i,n,a),h.push(i,o,o,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],e=this.toBBox;if(!p(t,i))return n;for(var r,a,o,h,s=[];i;){for(r=0,a=i.children.length;r<a;r++)o=i.children[r],p(t,h=i.leaf?e(o):o)&&(i.leaf?n.push(o):d(t,h)?this._all(o,n):s.push(o));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!p(t,i))return!1;for(var e,r,a,o,h=[];i;){for(e=0,r=i.children.length;e<r;e++)if(a=i.children[e],p(t,o=i.leaf?n(a):a)){if(i.leaf||d(t,o))return!0;h.push(a)}i=h.pop()}return!1},load:function(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var r=this.data;this.data=e,e=r}this._insert(e,this.data.height-e.height-1,!0)}}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=$([]),this},remove:function(t,i){if(!t)return this;for(var n,e,r,o,h=this.data,s=this.toBBox(t),f=[],l=[];h||f.length;){if(h||(h=f.pop(),e=f[f.length-1],n=l.pop(),o=!0),h.leaf&&-1!==(r=a(t,h.children,i))){h.children.splice(r,1),f.push(h),this._condense(f);break}!o&&!h.leaf&&d(h,s)?(f.push(h),l.push(n),n=0,e=h,h=h.children[0]):e?(n++,h=e.children[n],o=!1):h=null}return this},toBBox:function(t){return t},compareMinX:f,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,e){var r,a=n-i+1,h=this._maxEntries;if(a<=h)return o(r=$(t.slice(i,n+1)),this.toBBox),r;e||(e=Math.ceil(Math.log(a)/Math.log(h)),h=Math.ceil(a/Math.pow(h,e-1))),(r=$([])).leaf=!1,r.height=e;var s,f,l,u,c=Math.ceil(a/h),m=c*Math.ceil(Math.sqrt(h));for(_(t,i,n,m,this.compareMinX),s=i;s<=n;s+=m)for(l=Math.min(s+m-1,n),_(t,s,l,c,this.compareMinY),f=s;f<=l;f+=c)u=Math.min(f+c-1,l),r.children.push(this._build(t,f,u,e-1));return o(r,this.toBBox),r},_chooseSubtree:function(t,i,n,e){for(var r,a,o,h,s,f,l,c;e.push(i),!i.leaf&&e.length-1!==n;){for(r=0,l=c=1/0,a=i.children.length;r<a;r++)s=u(o=i.children[r]),(f=m(t,o)-s)<c?(c=f,l=s<l?s:l,h=o):f===c&&s<l&&(l=s,h=o);i=h||i.children[0]}return i},_insert:function(t,i,n){var e=this.toBBox,r=n?t:e(t),a=[],o=this._chooseSubtree(r,this.data,i,a);for(o.children.push(t),s(o,r);i>=0;)if(a[i].children.length>this._maxEntries)this._split(a,i),i--;else break;this._adjustParentBBoxes(r,a,i)},_split:function(t,i){var n=t[i],e=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,e);var a=this._chooseSplitIndex(n,r,e),h=$(n.children.splice(a,n.children.length-a));h.height=n.height,h.leaf=n.leaf,o(n,this.toBBox),o(h,this.toBBox),i?t[i-1].children.push(h):this._splitRoot(n,h)},_splitRoot:function(t,i){this.data=$([t,i]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var e,r,a,o,s,f,l,c;for(f=l=1/0,e=i;e<=n-i;e++)o=x(r=h(t,0,e,this.toBBox),a=h(t,e,n,this.toBBox)),s=u(r)+u(a),o<f?(f=o,c=e,l=s<l?s:l):o===f&&s<l&&(l=s,c=e);return c},_chooseSplitAxis:function(t,i,n){var e=t.leaf?this.compareMinX:f,r=t.leaf?this.compareMinY:l,a=this._allDistMargin(t,i,n,e),o=this._allDistMargin(t,i,n,r);a<o&&t.children.sort(e)},_allDistMargin:function(t,i,n,e){t.children.sort(e);var r,a,o=this.toBBox,f=h(t,0,i,o),l=h(t,n-i,n,o),u=c(f)+c(l);for(r=i;r<n-i;r++)a=t.children[r],s(f,t.leaf?o(a):a),u+=c(f);for(r=n-i-1;r>=i;r--)a=t.children[r],s(l,t.leaf?o(a):a),u+=c(l);return u},_adjustParentBBoxes:function(t,i,n){for(var e=n;e>=0;e--)s(i[e],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=Function("a","b",i.join(t[0])),this.compareMinY=Function("a","b",i.join(t[1])),this.toBBox=Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:2}],2:[function(t,i,n){"use strict";function e(t,i,n,e,o){!function t(i,n,e,a,o){for(;a>e;){if(a-e>600){var h=a-e+1,s=n-e+1,f=Math.log(h),l=.5*Math.exp(2*f/3),u=.5*Math.sqrt(f*l*(h-l)/h)*(s-h/2<0?-1:1),c=Math.max(e,Math.floor(n-s*l/h+u)),m=Math.min(a,Math.floor(n+(h-s)*l/h+u));t(i,n,c,m,o)}var x=i[n],d=e,p=a;for(r(i,e,n),o(i[a],x)>0&&r(i,e,a);d<p;){for(r(i,d,p),d++,p--;0>o(i[d],x);)d++;for(;o(i[p],x)>0;)p--}0===o(i[e],x)?r(i,e,p):r(i,++p,a),p<=n&&(e=p+1),n<=p&&(a=p-1)}}(t,i,n||0,e||t.length-1,o||a)}function r(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}function a(t,i){return t<i?-1:t>i?1:0}i.exports=e,i.exports.default=e},{}]},{},[1])(1)});
